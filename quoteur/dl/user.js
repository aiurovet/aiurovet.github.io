////////////////////////////////////////////////////////////////////////////////
// Copyright (C) Alexander Iurovetski 2024
// All rights reserved under MIT license (see LICENSE file)
//
// Manage application data and preferences
////////////////////////////////////////////////////////////////////////////////

"use strict";

////////////////////////////////////////////////////////////////////////////////

class User {
  // Constants
  //
  static defaultFileFormat = "png";
  static defaultUserId = "No profile";

  //////////////////////////////////////////////////////////////////////////////

  // Graphics file format to save the quote to (global)
  //
  static fileFormat = User.defaultFileFormat;

  //////////////////////////////////////////////////////////////////////////////

  // User id (unique free text)
  //
  userId = User.defaultUserId;

  // Flag indicating the footer is used
  //
  footer = new Look();

  // Flag indicating the footer is used
  //
  phrase = new Look();

  //////////////////////////////////////////////////////////////////////////////
  // If only one argument passed, and that is an object, initialize parameters
  // with its properties: i.e. constructing from a deserialized saved object
  //////////////////////////////////////////////////////////////////////////////

  constructor(userId, phrase, footer) {
    if (userId instanceof Object) {
      let from = userId;
      this.init(from.userId, from.phrase, from.footer)
    } else {
      this.init(userId, phrase, footer);
    }
  }

  //////////////////////////////////////////////////////////////////////////////
  // Initialise properties from the given parameters
  //////////////////////////////////////////////////////////////////////////////

  init(userId, phrase, footer) {
    this.userId = userId ?? User.defaultUserId;
    this.phrase = phrase;
    this.footer = footer;
  }

  //////////////////////////////////////////////////////////////////////////////
  // Convert this object into the one that excludes all irrelevant properties
  //////////////////////////////////////////////////////////////////////////////

  toSerializable() {
    return {
      userId: this.userId,
      phrase: this.phrase?.toSerializable(),
      footer: this.footer?.toSerializable(),
    };
  }

  //////////////////////////////////////////////////////////////////////////////
}