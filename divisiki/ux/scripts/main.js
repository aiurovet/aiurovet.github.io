////////////////////////////////////////////////////////////////////////////////
// Copyright (C) Alexander Iurovetski 2024
// All rights reserved under MIT license (see LICENSE file)
//
// Main page
////////////////////////////////////////////////////////////////////////////////

"use strict";

////////////////////////////////////////////////////////////////////////////////
// Global variables (singlwtons)
////////////////////////////////////////////////////////////////////////////////

var Core = null;
var Json = null;
var Data = null;
var Main = null;
var Pref = null;

////////////////////////////////////////////////////////////////////////////////
// Application entry point
////////////////////////////////////////////////////////////////////////////////

$(document).ready(() => {
  // Initialize global variables
  //
  Core = new CoreClass();
  Data = new DataClass();
  Json = new JsonClass();
  Main = new MainClass();
  Pref = new PrefClass();

  // Initialize the UI
  //
  Data.load();
  Core.setNumber(2);
  Core.setDivBy(2);
  Core.setScore(0);
  //Pref.init(true);
});


////////////////////////////////////////////////////////////////////////////////
// Set the event handlers
////////////////////////////////////////////////////////////////////////////////

$(window).bind("beforeunload", async () => {
  if (!Pref) {
    return;
  }
  await Pref.onClickExit();
});

$(window).resize(() => {
  if (!Core) {
    return;
  }
  Core.setNumberHeight();
});

////////////////////////////////////////////////////////////////////////////////

class MainClass {
  constructor() {
  }

  //////////////////////////////////////////////////////////////////////////////
  // Go to the menu
  //////////////////////////////////////////////////////////////////////////////

  onClickMenu() {
    Core.setPopup(true);
    Pref.onClickCanEdit();
    Pref.onClickHelp(false);
    Pref.setEditorHeight();
    Pref.resetList();
  }

  //////////////////////////////////////////////////////////////////////////////
  // Reaction: a number is NOT divisible by given number(s)
  //////////////////////////////////////////////////////////////////////////////

  onClickNo() {
  }

  //////////////////////////////////////////////////////////////////////////////
  // Reaction: a number is divisible by given number(s)
  //////////////////////////////////////////////////////////////////////////////

  onClickYes() {
  }

  //////////////////////////////////////////////////////////////////////////////
}