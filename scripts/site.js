////////////////////////////////////////////////////////////////////////////////
// Copyright (C) Alexander Iurovetski 2023
// All rights reserved under MIT license (see LICENSE file)
////////////////////////////////////////////////////////////////////////////////

const NakedTopUrls = [ 'aiurovet.com', 'aiurovet.github.io' ];

////////////////////////////////////////////////////////////////////////////////
// Current page's entry point
////////////////////////////////////////////////////////////////////////////////

$(document).ready(function () {
  initHeader();
});

////////////////////////////////////////////////////////////////////////////////
// Returns top-level URL in both local and remote mode
////////////////////////////////////////////////////////////////////////////////

function getRootUrl() {
  const cnt = NakedTopUrls.length;
  const url = window.location.href;

  for (var i = 0; ; i++) {
    if (i >= cnt) {
      return url;
    }

    var nakedTopUrl = NakedTopUrls[i];
    var startPos = url.indexOf(nakedTopUrl);

    if (startPos >= 0) {
      return url.substring(0, startPos + nakedTopUrl.length) + '/index.html';
    }
  }
}

////////////////////////////////////////////////////////////////////////////////
// Initialize header: set click handler
////////////////////////////////////////////////////////////////////////////////

function initHeader() {
  const jqHeader = $('.header');

  if (!jqHeader.hasClass('home')) {
    jqHeader.click(onHeaderClick);
  }
}

////////////////////////////////////////////////////////////////////////////////
// Header click handler - redirects to the home page
////////////////////////////////////////////////////////////////////////////////

function onHeaderClick() {
  window.location = getRootUrl();
}

////////////////////////////////////////////////////////////////////////////////